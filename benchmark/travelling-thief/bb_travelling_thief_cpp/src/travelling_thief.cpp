#include <iostream>
#include <vector>
#include <algorithm>
#include <map>
#include <utility>


#include <bb_travelling_thief/travelling_thief.h>

namespace traveling_thief {
    double cal_rental(
        int max_speed,
        int min_speed,
        int knapsack_capacity, 
        const std::vector<std::vector<int>>& city_distances, 
        const std::vector<int>& orders,
        const std::vector<int>& weights
    ) {
        double rental = 0;
        for (int i = 0; i < orders.size(); ++i) {
            double velocity = max_speed - weights[i] * (max_speed - min_speed) / knapsack_capacity;
            int current_city = orders[i] - 1;
            int next_city = (i == orders.size() - 1) ? 0 : orders[i + 1] - 1;
            rental += city_distances[current_city][next_city] / velocity;
        }
        return rental;
    }

    std::vector<std::vector<int>> get_distance_matrix(int n) {
        switch (n) {
            case 1:
                return {
                    {   0,  50, 547, 256, 390, 220, 738, 273, 389, 361 },
                    {  50,   0, 595, 255, 434, 266, 788, 253, 420, 337 },
                    { 547, 595,   0, 552, 416, 410, 222, 651, 326, 722 },
                    { 256, 255, 552,   0, 580, 410, 772, 103, 260, 172 },
                    { 390, 434, 416, 580,   0, 175, 500, 640, 528, 730 },
                    { 220, 266, 410, 410, 175,   0, 563, 465, 405, 556 },
                    { 738, 788, 222, 772, 500, 563,   0, 870, 547, 943 },
                    { 273, 253, 651, 103, 640, 465, 870,   0, 362,  91 },
                    { 389, 420, 326, 260, 528, 405, 547, 362,   0, 416 },
                    { 361, 337, 722, 172, 730, 556, 943,  91, 416,   0 }
                };
            case 2:
                return {
                    {   0,  477,  400,  502,  354,  667,  261,  361,  290,  768 },
                    { 477,    0,  679,   36,  499,  424,  233,  706,  606,  412 },
                    { 400,  679,    0,  714,  752,  594,  466,   94,  110,  757 },
                    { 502,   36,  714,    0,  501,  449,  264,  740,  640,  424 },
                    { 354,  499,  752,  501,    0,  862,  425,  714,  643,  900 },
                    { 667,  424,  594,  449,  862,    0,  446,  670,  591,  175 },
                    { 261,  233,  466,  264,  425,  446,    0,  481,  382,  519 },
                    { 361,  706,   94,  740,  714,  670,  481,    0,  100,  827 },
                    { 290,  606,  110,  640,  643,  591,  382,  100,    0,  742 },
                    { 768,  412,  757,  424,  900,  175,  519,  827,  742,    0 }
                };
            case 3:
                return {
                    {   0,  574,  781,  779,  484,  411,  711,   91,  804,  864,  583,  604,  447,  242,  546,  491,  600,  701,  433,  983},
                    { 574,    0,  779,  322,  270,  506,  581,  497,  457,  291,  240,  113,  148,  602,   92,   85,  345,  575,  149,  512},
                    { 781,  779,    0,  620,  962,  381,  216,  797,  470,  902,  546,  891,  806,  553,  848,  767, 1082,  218,  700,  695},
                    { 779,  322,  620,    0,  592,  519,  404,  725,  172,  291,  198,  418,  451,  704,  414,  381,  662,  403,  383,  206},
                    { 484,  270,  962,  592,    0,  619,  791,  393,  716,  506,  475,  202,  161,  618,  180,  221,  130,  782,  266,  781},
                    { 411,  506,  381,  519,  619,    0,  306,  418,  467,  728,  342,  602,  479,  219,  547,  462,  746,  296,  383,  690},
                    { 711,  581,  216,  404,  791,  306,    0,  703,  263,  687,  342,  694,  630,  522,  658,  581,  903,   10,  524,  497},
                    { 91,   497,  797,  725,  393,  418,  703,    0,  767,  787,  533,  519,  364,  290,  461,  412,  510,  693,  361,  930},
                    { 804,  457,  470,  172,  716,  467,  263,  767,    0,  461,  250,  564,  561,  678,  548,  495,  802,  265,  472,  238},
                    { 864,  291,  902,  291,  506,  728,  687,  787,  461,    0,  391,  304,  432,  867,  344,  375,  518,  684,  433,  367},
                    { 583,  240,  546,  198,  475,  342,  342,  533,  250,  391,    0,  354,  316,  510,  322,  255,  575,  336,  222,  400},
                    { 604,  113,  891,  418,  202,  602,  694,  519,  564,  304,  354,  0,    158,  671,   61,  141,  245,  688,  222,  591},
                    { 447,  148,  806,  451,  161,  479,  630,  364,  561,  432,  316,  158,    0,  520,   98,   71,  276,  622,  106,  649},
                    { 242,  602,  553,  704,  618,  219,  522,  290,  678,  867,  510,  671,  520,    0,  611,  533,  747,  512,  455,  891},
                    { 546,   92,  848,  414,  180,  547,  658,  461,  548,  344,  322,  61,    98,  611,    0,   85,  255,  651,  165,  600},
                    { 491,   85,  767,  381,  221,  462,  581,  412,  495,  375,  255,  141,   71,  533,   85,    0,  322,  574,   81,  579},
                    { 600,  345, 1082,  662,  130,  746,  903,  510,  802,  518,  575,  245,  276,  747,  255,  322,    0,  895,  382,  835},
                    { 701,  575,  218,  403,  782,  296,   10,  693,  265,  684,  336,  688,  622,  512,  651,  574,  895,    0,  516,  500},
                    { 433,  149,  700,  383,  266,  383,  524,  361,  472,  433,  222,  222,  106,  455,  165,   81,  382,  516,    0,  588},
                    { 983,  512,  695,  206,  781,  690,  497,  930,  238,  367,  400,  591,  649,  891,  600,  579,  835,  500,  588,    0},
                };
            case 4:
                return  {
                    {   0,  757,  211,  497,  439,  376,  344,  498,  279,  497,  127,  381,  472,  534,  150,  480,  453,  273,  247,  253 },
                    { 757,    0,  605,  313, 1196,  405,  787,  742,  935,  654,  771, 1071,  294,  401,  867,  551,  373,  641,  734,  538 },
                    { 211,  605,    0,  412,  623,  200,  485,  595,  483,  309,  308,  466,  311,  326,  270,  506,  258,  354,  150,   67 },
                    { 497,  313,  412,    0,  925,  262,  474,  441,  632,  605,  481,  857,  198,  411,  632,  255,  311,  331,  561,  350 },
                    { 439, 1196,  623,  925,    0,  810,  585,  763,  365,  826,  449,  313,  910,  944,  358,  838,  880,  631,  563,  680 },
                    { 376,  405,  200,  262,  810,    0,  539,  591,  610,  344,  430,  666,  112,  199,  467,  446,   91,  381,  332,  135 },
                    { 344,  787,  485,  474,  585,  539,    0,  180,  221,  794,  220,  682,  580,  738,  474,  283,  630,  160,  580,  483 },
                    { 498,  742,  595,  441,  763,  591,  180,    0,  398,  893,  383,  855,  598,  787,  639,  191,  675,  242,  713,  574 },
                    { 279,  935,  483,  632,  365,  610,  221,  398,    0,  776,  181,  510,  683,  792,  348,  491,  697,  305,  520,  510 },
                    { 497,  654,  309,  605,  826,  344,  794,  893,  776,    0,  611,  568,  422,  253,  480,  776,  306,  656,  270,  319 },
                    { 127,  771,  308,  481,  449,  430,  220,  383,  181,  611,    0,  474,  507,  611,  256,  400,  516,  187,  372,  330 },
                    { 381, 1071,  466,  857,  313,  666,  682,  855,  510,  568,  474,    0,  777,  743,  232,  861,  711,  650,  347,  533 },
                    { 472,  294,  311,  198,  910,  112,  580,  598,  683,  422,  507,  777,    0,  213,  574,  429,  117,  420,  444,  244 },
                    { 534,  401,  326,  411,  944,  199,  738,  787,  792,  253,  611,  743,  213,    0,  586,  632,  112,  580,  398,  283 },
                    { 150,  867,  270,  632,  358,  467,  474,  639,  348,  480,  256,  232,  574,  586,    0,  630,  528,  422,  211,  332 },
                    { 480,  551,  506,  255,  838,  446,  283,  191,  491,  776,  400,  861,  429,  632,  630,    0,  522,  214,  645,  466 },
                    { 453,  373,  258,  311,  880,   91,  630,  675,  697,  306,  516,  711,  117,  112,  528,  522,    0,  471,  366,  201 },
                    { 273,  641,  354,  331,  631,  381,  160,  242,  305,  656,  187,  650,  420,  580,  422,  214,  471,    0,  472,  338 },
                    { 247,  734,  150,  561,  563,  332,  580,  713,  520,  270,  372,  347,  444,  398,  211,  645,  366,  472,    0,  212 },
                    { 253,  538,   67,  350,  680,  135,  483,  574,  510,  319,  330,  533,  244,  283,  332,  466,  201,  338,  212,    0 },
                };
            case 5:
                return  {
                    {   0,  624,  262,  408,  776,  508, 1071,  394,  727, 1041,  876,  702,  209,  494,  792,  332,  765,  995,  659,  401 },
                    { 624,    0,  763,  358,  399,  384,  522,  262,  240,  470,  484,  443,  415,  422,  220,  812,  353,  420,   78,  244 },
                    { 262,  763,    0,  443,  782,  747, 1259,  590,  920, 1219,  870,  939,  394,  739,  880,   71,  788, 1170,  774,  519 },
                    { 408,  358,  443,    0,  369,  538,  879,  324,  570,  828,  468,  690,  262,  555,  439,  479,  361,  778,  347,  150 },
                    { 776,  399,  782,  369,    0,  758,  820,  573,  628,  753,  103,  842,  608,  790,  263,  801,   50,  709,  326,  419 },
                    { 508,  384,  747,  538,  758,    0,  614,  214,  300,  604,  853,  194,  364,   41,  602,  814,  718,  567,  461,  393 },
                    {1071,  522, 1259,  879,  820,  614,    0,  678,  344,   71,  861,  472,  875,  648,  557, 1315,  771,  112,  550,  753 },
                    { 394,  262,  590,  324,  573,  214,  678,    0,  334,  647,  673,  377,  198,  234,  471,  652,  539,  600,  323,  180 },
                    { 727,  240,  920,  570,  628,  300,  344,  334,    0,  318,  702,  248,  532,  340,  398,  978,  580,  275,  304,  429 },
                    {1041,  470, 1219,  828,  753,  604,   71,  647,  318,    0,  792,  481,  841,  641,  490, 1273,  704,   50,  492,  707 },
                    { 876,  484,  870,  468,  103,  853,  861,  673,  702,  792,    0,  926,  711,  886,  314,  884,  135,  750,  407,  522 },
                    { 702,  443,  939,  690,  842,  194,  472,  377,  248,  481,  926,    0,  552,  212,  636, 1006,  796,  455,  519,  540 },
                    { 209,  415,  394,  262,  608,  364,  875,  198,  532,  841,  711,  552,    0,  365,  590,  458,  589,  793,  453,  202 },
                    { 494,  422,  739,  555,  790,   41,  648,  234,  340,  641,  886,  212,  365,    0,  641,  808,  752,  605,  498,  414 },
                    { 792,  220,  880,  439,  263,  602,  557,  471,  398,  490,  314,  636,  590,  641,    0,  917,  214,  446,  149,  391 },
                    { 332,  812,   71,  479,  801,  814, 1315,  652,  978, 1273,  884, 1006,  458,  808,  917,    0,  810, 1224,  818,  569 },
                    { 765,  353,  788,  361,   50,  718,  771,  539,  580,  704,  135,  796,  589,  752,  214,  810,    0,  659,  279,  394 },
                    { 995,  420, 1170,  778,  709,  567,  112,  600,  275,   50,  750,  455,  793,  605,  446, 1224,  659,    0,  443,  658 },
                    { 659,   78,  774,  347,  326,  461,  550,  323,  304,  492,  407,  519,  453,  498,  149,  818,  279,  443,    0,  262 },
                    { 401,  244,  519,  150,  419,  393,  753,  180,  429,  707,  522,  540,  202,  414,  391,  569,  394,  658,  262,    0 },
                };
            default:
                throw std::invalid_argument("Invalid distance matrix number " + std::to_string(n));
        }
    }

    std::vector<traveling_thief::Item> get_items(int n) {
        switch (n) {
            case 1:
            return {
                {9665, 6534, 2},
                {5393, 3700, 2},
                {3324, 9110, 2},
                {4823, 2656, 3},
                {8968, 9789, 3},
                {7715, 1925, 3},
                {1743, 3194, 4},
                {3432, 4325, 4},
                {4604, 3877, 4},
                {2220, 3815, 5},
                {5965, 9176, 5},
                {5152, 5809, 5},
                {3181, 3473, 6},
                {6830, 658, 6},
                {1792, 3607, 6},
                {7552, 8732, 7},
                {2971, 7032, 7},
                {9780, 6878, 7},
                {5816, 8150, 8},
                {7851, 9291, 8},
                {3842, 9504, 8},
                {4843, 3579, 9},
                {8989, 9904, 9},
                {1001, 9343, 9},
                {5358, 4294, 10},
                {7725, 5857, 10},
                {277, 2654, 10}
            };
            case 2:
            return {
                    {5887, 9060, 2},
                    {6860, 8916, 2},
                    {3366, 8888, 2},
                    {7048, 1248, 2},
                    {4476, 1284, 2},
                    {4221, 3009, 2},
                    {1682, 2574, 2},
                    {1061, 3431, 2},
                    {7114, 835, 2},
                    {965, 1594, 2},
                    {8502, 7786, 2},
                    {8310, 6166, 2},
                    {1726, 5223, 2},
                    {757, 2174, 2},
                    {8807, 643, 2},
                    {7363, 2200, 3},
                    {6574, 7408, 3},
                    {503, 8693, 3},
                    {4523, 1580, 3},
                    {4196, 5431, 3},
                    {1505, 5045, 3},
                    {660, 6395, 3},
                    {1052, 4376, 3},
                    {5231, 2230, 3},
                    {4364, 6328, 3},
                    {2019, 5076, 3},
                    {1641, 7060, 3},
                    {4120, 8336, 3},
                    {9228, 3465, 3},
                    {5508, 5648, 3},
                    {8444, 6507, 4},
                    {9670, 7983, 4},
                    {1815, 2225, 4},
                    {7450, 8681, 4},
                    {9252, 9625, 4},
                    {8620, 8875, 4},
                    {595, 4873, 4},
                    {2672, 3376, 4},
                    {6167, 6477, 4},
                    {8637, 5412, 4},
                    {1695, 6809, 4},
                    {5758, 2170, 4},
                    {9519, 1162, 4},
                    {813, 5023, 4},
                    {8843, 5238, 4},
                    {6941, 4987, 5},
                    {5323, 5877, 5},
                    {4567, 5429, 5},
                    {8621, 8309, 5},
                    {241, 8720, 5},
                    {2096, 2537, 5},
                    {5295, 5434, 5},
                    {5466, 9489, 5},
                    {1227, 7502, 5},
                    {4681, 7959, 5},
                    {7540, 6066, 5},
                    {6334, 1380, 5},
                    {9585, 1019, 5},
                    {2304, 898, 5},
                    {8680, 8163, 5},
                    {9530, 4227, 6},
                    {4120, 9500, 6},
                    {5648, 6024, 6},
                    {6164, 6695, 6},
                    {5136, 7711, 6},
                    {9901, 5677, 6},
                    {8818, 8415, 6},
                    {2849, 576, 6},
                    {2530, 4198, 6},
                    {3723, 9320, 6},
                    {2285, 1947, 6},
                    {3124, 6835, 6},
                    {920, 1725, 6},
                    {9040, 4453, 6},
                    {1852, 3447, 6},
                    {4387, 1194, 7},
                    {9458, 8724, 7},
                    {1386, 1292, 7},
                    {3661, 2940, 7},
                    {8480, 7179, 7},
                    {457, 9772, 7},
                    {6131, 8073, 7},
                    {4748, 3703, 7},
                    {3383, 9898, 7},
                    {8187, 3953, 7},
                    {7070, 7508, 7},
                    {6115, 9020, 7},
                    {3193, 7999, 7},
                    {1291, 4303, 7},
                    {6773, 3399, 7},
                    {235, 8816, 8},
                    {6337, 8526, 8},
                    {8080, 1351, 8},
                    {6714, 8456, 8},
                    {9574, 9678, 8},
                    {7072, 757, 8},
                    {5864, 7611, 8},
                    {204, 3209, 8},
                    {5004, 190, 8},
                    {8960, 2066, 8},
                    {5058, 8496, 8},
                    {5270, 8996, 8},
                    {9471, 9133, 8},
                    {4728, 8711, 8},
                    {6840, 8980, 8},
                    {8584, 6789, 9},
                    {9975, 9620, 9},
                    {5142, 7514, 9},
                    {5046, 2245, 9},
                    {8395, 7377, 9},
                    {9705, 2399, 9},
                    {9111, 2770, 9},
                    {4240, 257, 9},
                    {7049, 9371, 9},
                    {693, 6135, 9},
                    {6995, 6688, 9},
                    {4712, 400, 9},
                    {1582, 1575, 9},
                    {178, 6381, 9},
                    {4505, 7708, 9},
                    {4555, 6205, 10},
                    {7987, 5613, 10},
                    {6464, 7573, 10},
                    {2008, 8025, 10},
                    {5908, 2470, 10},
                    {6902, 2529, 10},
                    {397, 2919, 10},
                    {4363, 6125, 10},
                    {2182, 9759, 10},
                    {4804, 6865, 10},
                    {4325, 8517, 10},
                    {4806, 6993, 10},
                    {4583, 7202, 10},
                    {5603, 8059, 10},
                    {3630, 8150, 10}
                };
            case 3:
            return {
                    {8538, 2669,  2},
                    {7905, 3909,  2},
                    {9282, 8295,  2},
                    {7616, 1421,  3},
                    {2963, 5992,  3},
                    {5596, 7664,  3},
                    {3180, 1297,  4},
                    {9590, 7714,  4},
                    {1788,  771,  4},
                    {9833,  845,  5},
                    {9476, 6121,  5},
                    {2006, 4944,  5},
                    {2285, 5523,  6},
                    {6201, 4137,  6},
                    {2817, 1930,  6},
                    {1580, 5729,  7},
                    {3348, 1491,  7},
                    {2620, 6089,  7},
                    {2861, 1992,  8},
                    {4046, 7798,  8},
                    {7553, 2787,  8},
                    {7931, 1898,  9},
                    {1241, 7812,  9},
                    {1827, 8682,  9},
                    {5866, 6913, 10},
                    {6889, 5444, 10},
                    {5827,  665, 10},
                    {6024, 8422, 11},
                    {5534, 7421, 11},
                    { 666, 2669, 11},
                    {2768, 2294, 12},
                    {1826, 2785, 12},
                    {5054, 5841, 12},
                    {3950, 3904, 13},
                    {9961, 5755, 13},
                    { 579, 9657, 13},
                    {5519, 9591, 14},
                    {2600, 1281, 14},
                    {1465, 6130, 14},
                    {9415, 8788, 15},
                    {5819, 7862, 15},
                    {7745, 5852, 15},
                    {1554, 7572, 16},
                    {6965, 1096, 16},
                    {6384, 3358, 16},
                    {9258, 4919, 17},
                    { 720, 5452, 17},
                    {3739, 6569, 17},
                    { 386, 6554, 18},
                    {8165, 7250, 18},
                    {5004, 7364, 18},
                    {3585, 6387, 19},
                    {9446, 4498, 19},
                    {1557, 2521, 19},
                    { 201, 4075, 20},
                    {8091, 5227, 20},
                    {5283, 1461, 20}
                };
            case 4:
            return {
                    {8403, 5010,  2},
                    {4513, 4020,  2},
                    {4293,  327,  2},
                    {3882, 8263,  2},
                    {2671, 8041,  2},
                    {9830, 5480,  2},
                    {3996, 9416,  2},
                    {6081, 9181,  2},
                    {8024, 3101,  2},
                    {7527, 8686,  2},
                    {6995, 1944,  2},
                    {7945, 1023,  2},
                    {8111, 1368,  2},
                    {8219, 6087,  2},
                    {6780,  747,  2},
                    {9679, 1726,  3},
                    {1000, 5952,  3},
                    {5045, 7052,  3},
                    {6364, 7605,  3},
                    {6126, 7675,  3},
                    {6075, 9685,  3},
                    {5192, 9649,  3},
                    {7820, 2363,  3},
                    {5141, 7093,  3},
                    {2524, 6691,  3},
                    {9532, 5098,  3},
                    {7447, 9079,  3},
                    {4940, 6313,  3},
                    {8276,  207,  3},
                    {3350, 6381,  3},
                    {6201, 1759,  4},
                    {7069, 2120,  4},
                    {7466, 4257,  4},
                    {9125, 8453,  4},
                    {8181, 2813,  4},
                    {2371, 3791,  4},
                    {4868, 8547,  4},
                    {4895, 4577,  4},
                    {7267,  640,  4},
                    {6859, 2638,  4},
                    {9123, 3179,  4},
                    {332, 5754,  4},
                    {4734, 4883,  4},
                    {6558, 3161,  4},
                    {4544, 1943,  4},
                    {9550, 9705,  5},
                    {6109, 7384,  5},
                    {3789, 9132,  5},
                    {386, 6905,  5},
                    {3336, 6137,  5},
                    {4629, 3173,  5},
                    {1615,  479,  5},
                    {2696, 9871,  5},
                    {8797,  473,  5},
                    {4039, 1188,  5},
                    {9229, 2946,  5},
                    {9613, 4976,  5},
                    {3211, 3973,  5},
                    {3635, 2415,  5},
                    {4964, 3650,  5},
                    {5964,  311,  6},
                    {6536, 8326,  6},
                    {5356, 1522,  6},
                    {9237, 3739,  6},
                    {4088, 4539,  6},
                    {1930, 3661,  6},
                    {5256, 8108,  6},
                    {8809, 4371,  6},
                    {6519, 7017,  6},
                    {1583, 1522,  6},
                    {6754, 4658,  6},
                    {3945, 3318,  6},
                    {4829, 6010,  6},
                    {7946, 1774,  6},
                    {7828, 6437,  6},
                    {6260, 1680,  7},
                    {6149, 2337,  7},
                    {4877, 8887,  7},
                    {446, 2715,  7},
                    {5033, 8341,  7},
                    {4376, 6758,  7},
                    {514, 6583,  7},
                    {2832,  670,  7},
                    {9438, 2207,  7},
                    {3075, 8289,  7},
                    {5368, 7102,  7},
                    {9220, 7080,  7},
                    {3137, 3230,  7},
                    {8550, 5821,  7},
                    {3941, 8737,  7},
                    {6847, 7105,  8},
                    {3942, 8152,  8},
                    {444, 9400,  8},
                    {1960,  978,  8},
                    {9310, 8684,  8},
                    {6239,  872,  8},
                    {7048, 1196,  8},
                    {3361, 5817,  8},
                    {2901, 7459,  8},
                    {6280, 9985,  8},
                    {8423, 2358,  8},
                    {5195, 7554,  8},
                    {9410, 4251,  8},
                    {3700, 6082,  8},
                    {4845, 9305,  8},
                    {7561, 5537,  9},
                    {3426, 4612,  9},
                    {2684, 3060,  9},
                    {2562, 8668,  9},
                    {9733, 5309,  9},
                    {984, 2673,  9},
                    {1070, 1885,  9},
                    {8782, 3376,  9},
                    {3088, 9439,  9},
                    {4144,  422,  9},
                    {4962, 2781,  9},
                    {5131, 5428,  9},
                    {9252, 7758,  9},
                    {7402, 9965,  9},
                    {5061, 3088,  9},
                    {6173, 7564, 10},
                    {5592, 5462, 10},
                    {540, 1040, 10},
                    {2256, 9414, 10},
                    {6145, 8698, 10},
                    {3560, 3678, 10},
                    {3241, 8480, 10},
                    {451, 1378, 10},
                    {8479, 4532, 10},
                    {7597, 5573, 10},
                    {5555, 8124, 10},
                    {2718, 9311, 10},
                    {4015, 1376, 10},
                    {4345, 4964, 10},
                    {1034,  975, 10},
                    {168, 8542, 11},
                    {7063, 8762, 11},
                    {5365, 8934, 11},
                    {3408, 4578, 11},
                    {2283,  646, 11},
                    {1098, 1251, 11},
                    {8856, 8713, 11},
                    {7608, 8085, 11},
                    {771,  259, 11},
                    {6673, 2006, 11},
                    {9430,  943, 11},
                    {8421, 2660, 11},
                    {8728, 1954, 11},
                    {457, 8940, 11},
                    {2490, 8130, 11},
                    {2398, 7772, 12},
                    {4522, 6117, 12},
                    {9068,  256, 12},
                    {4440, 8399, 12},
                    {9570, 3513, 12},
                    {5975, 5136, 12},
                    {3156, 3032, 12},
                    {6715, 1202, 12},
                    {8551, 4675, 12},
                    {5867, 7592, 12},
                    {1415, 1000, 12},
                    {5718, 7180, 12},
                    {2334, 1970, 12},
                    {8683, 4599, 12},
                    {9084,  953, 12},
                    {1398, 2620, 13},
                    {1123, 6098, 13},
                    {8262, 2664, 13},
                    {6685, 1460, 13},
                    {1374, 6598, 13},
                    {6673, 7059, 13},
                    {7576, 8472, 13},
                    {9780, 5321, 13},
                    {104, 7644, 13},
                    {6064, 5819, 13},
                    {6136, 6049, 13},
                    {2462, 7929, 13},
                    {5947, 5367, 13},
                    {5653, 8336, 13},
                    {652, 5122, 13},
                    {495, 9991, 14},
                    {7499, 9515, 14},
                    {4275, 8233, 14},
                    {8884, 1887, 14},
                    {4123,  510, 14},
                    {7086, 2887, 14},
                    {8182, 1756, 14},
                    {602, 7323, 14},
                    {3882, 9864, 14},
                    {121, 8244, 14},
                    {2995, 3967, 14},
                    {7847, 2876, 14},
                    {3963, 1567, 14},
                    {8062, 5210, 14},
                    {8034, 3704, 14},
                    {2024, 4059, 15},
                    {3183, 8681, 15},
                    {3087, 4775, 15},
                    {7088, 4297, 15},
                    {6218, 6298, 15},
                    {4956, 7822, 15},
                    {7792, 3114, 15},
                    {9405, 6335, 15},
                    {8214, 6394, 15},
                    {3930, 8029, 15},
                    {8702, 3425, 15},
                    {9342, 7520, 15},
                    {3463, 1336, 15},
                    {9659, 9239, 15},
                    {3196, 8613, 15},
                    {9816, 8289, 16},
                    {439, 4445, 16},
                    {4728, 4797, 16},
                    {3467, 2243, 16},
                    {8643, 7253, 16},
                    {7820, 8346, 16},
                    {1592, 6024, 16},
                    {3567, 6904, 16},
                    {934, 5611, 16},
                    {6321, 3882, 16},
                    {2672, 4728, 16},
                    {2022, 1059, 16},
                    {3858, 5393, 16},
                    {2869, 2777, 16},
                    {9902,  110, 16},
                    {405, 6208, 17},
                    {8789,  867, 17},
                    {324, 9149, 17},
                    {6125, 5883, 17},
                    {3236, 4019, 17},
                    {8128, 6087, 17},
                    {8381, 2859, 17},
                    {3230,  894, 17},
                    {9540, 3606, 17},
                    {5332, 1507, 17},
                    {4235, 8390, 17},
                    {1962, 7781, 17},
                    {2098, 3472, 17},
                    {789, 5253, 17},
                    {6395, 4059, 17},
                    {8682,  427, 18},
                    {805, 1383, 18},
                    {4898, 7040, 18},
                    {1271, 5208, 18},
                    {5513, 8285, 18},
                    {9520, 1446, 18},
                    {2142, 8160, 18},
                    {8459,  241, 18},
                    {5349, 9653, 18},
                    {7023, 5766, 18},
                    {7043,  204, 18},
                    {893, 3372, 18},
                    {7663, 4555, 18},
                    {7922, 6404, 18},
                    {6638, 2619, 18},
                    {6799, 7142, 19},
                    {4420, 7157, 19},
                    {9638, 7783, 19},
                    {7358, 6343, 19},
                    {9284, 6396, 19},
                    {5648, 4422, 19},
                    {9838, 9235, 19},
                    {9610, 2553, 19},
                    {899, 1415, 19},
                    {9679, 5085, 19},
                    {8263, 8023, 19},
                    {5311, 3060, 19},
                    {6552, 3177, 19},
                    {113, 3296, 19},
                    {9701, 2288, 19},
                    {5316, 2026, 20},
                    {5304, 8083, 20},
                    {8626, 1597, 20},
                    {5766, 8373, 20},
                    {5100,  903, 20},
                    {3384, 7031, 20},
                    {3276, 4161, 20},
                    {3010,  310, 20},
                    {4035, 7944, 20},
                    {6553, 4554, 20},
                    {7705, 3971, 20},
                    {7000,  492, 20},
                    {5738, 2305, 20},
                    {5865, 7718, 20},
                    {9847, 7577, 20}
                };
            case 5:
            return {
                    {3709, 6735,  2},
                    {7030, 9768,  2},
                    {6795, 8012,  2},
                    {975, 6297,  2},
                    {9904, 8183,  2},
                    {4975, 2483,  2},
                    {9556, 6877,  2},
                    {356, 2400,  2},
                    {275, 5063,  2},
                    {4701, 2820,  2},
                    {634, 9166,  2},
                    {3683, 4681,  2},
                    {4640, 1086,  2},
                    {6354, 8019,  2},
                    {3681, 3079,  2},
                    {8296, 7577,  2},
                    {6269, 1718,  2},
                    {588, 9405,  2},
                    {3607, 6401,  2},
                    {9680, 9758,  2},
                    {1946, 3992,  3},
                    {2565, 6550,  3},
                    {5055, 4304,  3},
                    {7918, 5584,  3},
                    {6871, 9400,  3},
                    {1548, 6856,  3},
                    {7091, 4465,  3},
                    {5602, 7905,  3},
                    {4024, 1164,  3},
                    {7189, 7128,  3},
                    {6123, 5710,  3},
                    {687, 4916,  3},
                    {7097, 3741,  3},
                    {4385, 4400,  3},
                    {1856,  633,  3},
                    {3361, 3813,  3},
                    {5328, 5234,  3},
                    {8490, 2928,  3},
                    {8009, 1416,  3},
                    {632, 1296,  3},
                    {1989, 6149,  4},
                    {8529, 4814,  4},
                    {9046,  233,  4},
                    {7528, 9883,  4},
                    {249, 8404,  4},
                    {6232, 1107,  4},
                    {1938, 6152,  4},
                    {3374, 8465,  4},
                    {3445, 1858,  4},
                    {6764, 2470,  4},
                    {6364, 3032,  4},
                    {9154, 5968,  4},
                    {1610, 3297,  4},
                    {2518, 1998,  4},
                    {2099, 4659,  4},
                    {3274, 1409,  4},
                    {8196, 5516,  4},
                    {9350, 1628,  4},
                    {8966, 1016,  4},
                    {6214,  285,  4},
                    {683, 7889,  5},
                    {4095, 4665,  5},
                    {2928, 1001,  5},
                    {2841, 2302,  5},
                    {7788, 1761,  5},
                    {2780, 8278,  5},
                    {5888, 3834,  5},
                    {3591, 8416,  5},
                    {1114, 8127,  5},
                    {1014, 2026,  5},
                    {6662, 3308,  5},
                    {8555, 8110,  5},
                    {4359, 2937,  5},
                    {7940, 8217,  5},
                    {1542, 3793,  5},
                    {3503,  671,  5},
                    {5682, 5850,  5},
                    {2805, 8038,  5},
                    {6017, 1681,  5},
                    {5766, 7268,  5},
                    {3556, 2850,  6},
                    {6133, 6663,  6},
                    {2029, 4633,  6},
                    {8424, 2981,  6},
                    {4228, 4872,  6},
                    {4974,  140,  6},
                    {3327, 6912,  6},
                    {2392, 4063,  6},
                    {5540, 4662,  6},
                    {7660, 8439,  6},
                    {1370, 3930,  6},
                    {1864, 8969,  6},
                    {4598, 9864,  6},
                    {7095, 3556,  6},
                    {7057, 5915,  6},
                    {4523, 3422,  6},
                    {8984, 3403,  6},
                    {5445, 2885,  6},
                    {3592, 2488,  6},
                    {529, 7632,  6},
                    {7984, 1075,  7},
                    {1744, 8461,  7},
                    {2190, 5001,  7},
                    {7150, 9075,  7},
                    {2889, 9704,  7},
                    {657, 4613,  7},
                    {8658, 6972,  7},
                    {6777, 7066,  7},
                    {1159,  548,  7},
                    {1277, 2753,  7},
                    {1480, 9924,  7},
                    {1414, 8649,  7},
                    {8363, 4263,  7},
                    {9915, 5567,  7},
                    {5131, 5094,  7},
                    {9493,  318,  7},
                    {8125, 6261,  7},
                    {1970, 8343,  7},
                    {2754,  989,  7},
                    {3624, 1609,  7},
                    {8441, 2176,  8},
                    {1270, 4343,  8},
                    {7302, 9861,  8},
                    {1111,  792,  8},
                    {3233, 5736,  8},
                    {2367, 4939,  8},
                    {8719, 4709,  8},
                    {6598, 3878,  8},
                    {2387, 1628,  8},
                    {6073, 6055,  8},
                    {4769, 4067,  8},
                    {9758, 8801,  8},
                    {9519, 9611,  8},
                    {5908,  220,  8},
                    {975, 8059,  8},
                    {623, 9557,  8},
                    {6037, 2580,  8},
                    {832, 7262,  8},
                    {8983, 9804,  8},
                    {2778, 9447,  8},
                    {4896, 2998,  9},
                    {6955, 2208,  9},
                    {4670,  948,  9},
                    {7072, 7772,  9},
                    {8804, 1064,  9},
                    {5051,  737,  9},
                    {1134, 3689,  9},
                    {4458, 1296,  9},
                    {8204, 9256,  9},
                    {5346, 9960,  9},
                    {9797, 6921,  9},
                    {9394, 9916,  9},
                    {2817, 4751,  9},
                    {8770,  793,  9},
                    {7859, 3585,  9},
                    {9308, 4996,  9},
                    {6212,  746,  9},
                    {3280, 4853,  9},
                    {1881, 8616,  9},
                    {6752,  650,  9},
                    {6117, 3163, 10},
                    {6515, 2824, 10},
                    {7661, 2323, 10},
                    {7902, 4029, 10},
                    {5159, 4463, 10},
                    {3509, 6520, 10},
                    {8703, 7350, 10},
                    {7562, 6319, 10},
                    {8562, 9734, 10},
                    {5549, 1591, 10},
                    {3127, 6111, 10},
                    {5628, 5800, 10},
                    {5301,  272, 10},
                    {2652, 3886, 10},
                    {6711, 3795, 10},
                    {1650, 6302, 10},
                    {6130, 1722, 10},
                    {4748, 2877, 10},
                    {1494, 7879, 10},
                    {1705, 2399, 10},
                    {9244, 4878, 11},
                    {7157, 9164, 11},
                    {5413, 4064, 11},
                    {5043, 5943, 11},
                    {2798, 9875, 11},
                    {8397, 5616, 11},
                    {5312, 4531, 11},
                    {7501,  257, 11},
                    {3290, 6523, 11},
                    {4168, 6687, 11},
                    {8987, 6921, 11},
                    {660, 1201, 11},
                    {1515, 8317, 11},
                    {175, 9619, 11},
                    {5939, 1706, 11},
                    {3643,  361, 11},
                    {2037, 3875, 11},
                    {9915, 1383, 11},
                    {7403, 5919, 11},
                    {343, 7422, 11},
                    {3048,  261, 12},
                    {3303, 2859, 12},
                    {471, 9798, 12},
                    {6944, 6321, 12},
                    {1763, 1517, 12},
                    {2797, 3291, 12},
                    {7028, 2534, 12},
                    {7996, 3777, 12},
                    {7260, 9372, 12},
                    {5896, 1819, 12},
                    {7362, 9945, 12},
                    {8313, 6148, 12},
                    {2395,  393, 12},
                    {6404, 8308, 12},
                    {612, 3556, 12},
                    {4970, 1561, 12},
                    {8538, 1379, 12},
                    {2271, 6284, 12},
                    {3588, 4247, 12},
                    {8007, 8270, 12},
                    {9174, 6311, 13},
                    {1499, 7107, 13},
                    {3217, 3813, 13},
                    {7828, 2330, 13},
                    {6993, 8288, 13},
                    {8116, 7703, 13},
                    {4054, 8762, 13},
                    {8486, 9873, 13},
                    {8930, 6993, 13},
                    {270,  287, 13},
                    {1219,  626, 13},
                    {1886, 7229, 13},
                    {4341, 8313, 13},
                    {4040, 3726, 13},
                    {1649, 7456, 13},
                    {7679,  750, 13},
                    {7790, 2640, 13},
                    {8346, 3143, 13},
                    {9058, 9102, 13},
                    {934,  402, 13},
                    {1402, 9304, 14},
                    {6765, 1027, 14},
                    {1525, 3241, 14},
                    {4297, 4979, 14},
                    {4561, 2826, 14},
                    {4513, 5783, 14},
                    {642, 6801, 14},
                    {2271, 7002, 14},
                    {8034, 1244, 14},
                    {5169, 6745, 14},
                    {6331, 6907, 14},
                    {2788, 9536, 14},
                    {8182, 6578, 14},
                    {8247, 7530, 14},
                    {3539, 7991, 14},
                    {9844, 5722, 14},
                    {3961, 4580, 14},
                    {5744, 5657, 14},
                    {5974, 2639, 14},
                    {520, 3561, 14},
                    {8319, 5598, 15},
                    {4722, 1467, 15},
                    {6996,  357, 15},
                    {3011, 1050, 15},
                    {8936, 9519, 15},
                    {7918,  388, 15},
                    {6155, 8891, 15},
                    {6606, 7382, 15},
                    {1617,  426, 15},
                    {9222, 1458, 15},
                    {6639, 8930, 15},
                    {7691, 6044, 15},
                    {1247, 2493, 15},
                    {7091, 4741, 15},
                    {7169,  212, 15},
                    {7803, 1398, 15},
                    {9459,  512, 15},
                    {970, 7698, 15},
                    {7203, 7237, 15},
                    {3122, 1141, 15},
                    {1068, 7329, 16},
                    {5954, 4995, 16},
                    {854, 9124, 16},
                    {7869, 2888, 16},
                    {4520, 4853, 16},
                    {7071, 4803, 16},
                    {7484, 3563, 16},
                    {5002, 5940, 16},
                    {8165, 7865, 16},
                    {5856, 6543, 16},
                    {7825, 4818, 16},
                    {2427, 8794, 16},
                    {5542,  125, 16},
                    {4844, 3788, 16},
                    {6115, 7700, 16},
                    {6142, 5262, 16},
                    {4962, 4564, 16},
                    {1997, 1386, 16},
                    {4017, 8035, 16},
                    {703,  860, 16},
                    {4143, 8953, 17},
                    {3892, 5753, 17},
                    {7943, 1685, 17},
                    {1806, 3332, 17},
                    {7514, 2138, 17},
                    {1501, 6340, 17},
                    {5043, 7771, 17},
                    {8722, 6138, 17},
                    {8022, 3095, 17},
                    {3761, 5250, 17},
                    {9656, 5738, 17},
                    {1116, 6789, 17},
                    {1125, 6913, 17},
                    {3156, 5684, 17},
                    {9628, 5503, 17},
                    {1767, 3537, 17},
                    {1092, 1508, 17},
                    {5273, 7417, 17},
                    {2725, 3535, 17},
                    {4369, 6068, 17},
                    {2703, 3822, 18},
                    {6936, 8138, 18},
                    {6026, 4066, 18},
                    {3997, 2658, 18},
                    {5381, 2716, 18},
                    {2102,  771, 18},
                    {8372, 9055, 18},
                    {2528, 3358, 18},
                    {2631, 9073, 18},
                    {8833, 8348, 18},
                    {9256, 8232, 18},
                    {9091, 2617, 18},
                    {4340, 9044, 18},
                    {2769, 8605, 18},
                    {7456, 4609, 18},
                    {2813, 1685, 18},
                    {943, 7944, 18},
                    {6195, 3871, 18},
                    {9918,  710, 18},
                    {4491,  233, 18},
                    {7472,  115, 19},
                    {5775, 1479, 19},
                    {3346, 6436, 19},
                    {5283, 3338, 19},
                    {270, 8802, 19},
                    {2555, 1588, 19},
                    {5696, 7418, 19},
                    {2031, 5812, 19},
                    {1025, 7116, 19},
                    {8364, 6153, 19},
                    {6067, 2764, 19},
                    {3214, 9439, 19},
                    {9787,  924, 19},
                    {3949, 9396, 19},
                    {170,  928, 19},
                    {9062, 8246, 19},
                    {6362, 9383, 19},
                    {5929, 8910, 19},
                    {9721,  938, 19},
                    {6814, 4299, 19},
                    {8937, 4786, 20},
                    {7246, 1837, 20},
                    {7217, 8205, 20},
                    {3475, 8667, 20},
                    {9122, 8794, 20},
                    {5952, 3401, 20},
                    {4730,  978, 20},
                    {2594, 4812, 20},
                    {5889, 5455, 20},
                    {4131, 5848, 20},
                    {177, 9809, 20},
                    {6348, 9889, 20},
                    {6615, 8081, 20},
                    {9887, 6649, 20},
                    {8190, 2274, 20},
                    {3415, 4731, 20},
                    {608,  798, 20},
                    {9883, 3654, 20},
                    {1468, 5847, 20},
                    {601, 4203, 20}
                };
            default:
            throw std::invalid_argument("Invalid number of weights");
        }
    }

    std::vector<int> calculate_weights(const std::vector<int>& orders, const std::vector<int>& chosen, const std::vector<traveling_thief::Item>& items, size_t items_per_city) {
        std::vector<int> weights(orders.size(), 0);
        int previous = 0;
        for (size_t i = 1; i < orders.size(); i++) {
            for (size_t j = 0; j < items_per_city; j++) {
                size_t index = (static_cast<size_t>(orders[i]) - 2) * items_per_city + j;
                bool has_chosen = chosen[index];
                Item item = items[index];
                weights[i] = previous + has_chosen * item.weight;
                previous = weights[i];
            }
        }
        return weights;
    }
}

extern "C" {

  void fzn_blackbox(const int* int_in, size_t int_in_len, const double *float_in,
                    size_t float_in_len, int *int_out, size_t int_out_len,
                    double *float_out, size_t float_out_len) {
    const double renting_ratio = float_in[0];
    const int max_speed = int_in[0];
    const int min_speed = int_in[1];
    const int knapsack_capacity = int_in[2];
    const int distance_matrix = int_in[3];
    const int order_len = int_in[4];
    const int nitems = int_in[5];
    const int ncities = int_in[6];
    const int d = 7;
    const std::vector<int> orders(int_in + d, int_in + d + order_len);
    const std::vector<int> chosen(int_in + d + order_len, int_in + d + order_len + nitems);

    const std::vector<traveling_thief::Item> items = traveling_thief::get_items(distance_matrix);

    int items_per_city = nitems / (ncities - 1);

    std::vector<int> weights = traveling_thief::calculate_weights(orders, chosen, items, static_cast<size_t>(items_per_city));
    std::vector<std::vector<int>> distances = traveling_thief::get_distance_matrix(distance_matrix);

    double rental = traveling_thief::cal_rental(max_speed, min_speed, knapsack_capacity, distances, orders, weights);

    float_out[0] = renting_ratio * rental;
  }
}
